/*** © 2022 Ueno ***/
{
  //-----------------------
  "third_party_server_screen@common.base_screen": {
    "$screen_content": "server_form.main_screen_content",
    "$gamepad_cursor|default": false,
    "gamepad_cursor": "$gamepad_cursor",
    "variables": [
      {
        "requires": "(($nx_os) or ($is_ps4))",
        "$gamepad_cursor": true
      }
    ],
    "button_mappings": [
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "button.menu_exit",
        "mapping_type": "global"
      }
    ]
  },
  "main_screen_content": {
    "type": "panel",
    "size": [
      "100%",
      "100%"
    ],
    "controls": [
      {
        "server_form_factory": {
          "type": "factory",
          "control_ids": {
            "long_form": "@server_form.long_form_main", //ボタンだけのやつ(ActionFormData)
            "custom_form": "@server_form.custom_form" //色々あるやつ(ModalFormData)
          }
        }
      }
    ]
  },
  //まとめ
  "long_form_main": {
    "type": "panel",
    "size": [
      "100%",
      "100%"
    ],
    "controls": [
      {
        "long_form@server_form.long_form": {}
      },
      {
        "long_form_map@server_form.long_form_map": {}
      },
      {
        "map_header@server_form.map_header": {}
      },
      {
        "container_form_store@server_form.container_form_store": {}
      }
    ]
  },
  //通常フォーム---------------------------
  "long_form@common_dialogs.main_panel_no_buttons": {
    "$title_panel": "common_dialogs.standard_title_label",
    "size": [
      225,
      200
    ],
    "$text_name": "#title_text",
    "$title_text_binding_type": "none",
    "$child_control": "server_form.long_form_panel",
    "layer": 2,
    //↓タイトルが＠＠＠ではない時見せる
    "bindings": [
      {
        "binding_type": "view",
        "source_property_name": "((not (#title_text = 'container')) and ((#title_text - '§m§a§p§r') = #title_text))",
        "target_property_name": "#visible"
      }
    ]
  },
  //Map投票フォーム----------------------
  "long_form_map@common_dialogs.main_panel_no_buttons": {
    "$custom_background": "server_form.server_form_background_map",
    //-----------------------
    "$title_panel": "common_dialogs.standard_title_label",
    "offset": [
      0,
      "-5px"
    ],
    "anchor_from": "bottom_middle",
    "anchor_to": "bottom_middle",
    "size": [
      "80%",
      "80%"
    ],
    "min_size": [
      320,
      "80%"
    ],
    "$title_text_binding_type": "none",
    "$child_control": "server_form.long_form_panel_map",
    "layer": 2,
    "bindings": [
      {
        "binding_type": "view",
        "source_property_name": "(not ((#title_text - '§m§a§p§r') = #title_text))",
        "target_property_name": "#visible"
      }
    ]
  },
  "long_form_panel_map": {
    "type": "stack_panel",
    "size": [
      "100%",
      "100%"
    ],
    "orientation": "vertical",
    "layer": 1,
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "controls": [
      {
        //スクロール
        "scrolling_panel@common.scrolling_panel": {
          "anchor_to": "top_left",
          "anchor_from": "top_left",
          "$show_background": false,
          "size": [
            "100%",
            "100%"
          ],
          "$scrolling_content": "server_form.long_form_scrolling_content_map",
          "$scroll_size": [
            5,
            "100% - 4px"
          ],
          "$scrolling_pane_size": [
            "100% - 4px",
            "100% - 2px"
          ],
          "$scrolling_pane_offset": [
            2,
            0
          ],
          "$scroll_bar_right_padding_size": [
            0,
            0
          ]
        }
      }
    ]
  },
  //スクロールする中身
  "long_form_scrolling_content_map": {
    "type": "stack_panel",
    "size": [
      "100% - 4px",
      "100%c"
    ],
    "orientation": "vertical",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "controls": [
      //body
      {
        "label_offset_panel": {
          "type": "panel",
          "ignored": true,
          "size": [
            "100%",
            "100%c"
          ],
          "controls": [
            {
              "main_label": {
                "type": "label",
                "layer": 23,
                "offset": [
                  2,
                  -20
                ],
                "color": "$main_header_text_color",
                "size": [
                  "100%",
                  "default"
                ],
                "anchor_from": "top_right",
                "anchor_to": "top_right",
                "text": "#form_text"
              }
            }
          ]
        }
      },
      //パディング(隙間)
      {
        "padding": {
          "type": "panel",
          "size": [
            "100%",
            4
          ]
        }
      },
      //ボタンn個
      {
        "wrapping_panel": {
          "type": "panel",
          "size": [
            "100%",
            "100%c"
          ],
          "controls": [
            {
              "long_form_dynamic_buttons_panel_map@server_form.long_form_dynamic_buttons_panel_map": {}
            }
          ]
        }
      }
    ]
  },
  "long_form_dynamic_buttons_panel_map": {
    "type": "grid",
    "offset": [
      2,
      0
    ],
    "size": [
      "100% - 4px",
      "100%c"
    ],
    "grid_fill_direction": "vertical",
    "grid_rescaling_type": "horizontal",
    "grid_item_template": "server_form.dynamic_button_map",
    "factory": {
      "name": "buttons",
      "control_name": "server_form.dynamic_button_map"
    },
    "collection_name": "form_buttons",
    "bindings": [
      {
        "binding_name": "#form_button_length",
        "binding_name_override": "#maximum_grid_items"
      }
    ]
  },
  //ボタンの内容
  "dynamic_button_map": {
    "type": "stack_panel",
    //↓ボタンサイズ縦横
    "size": [
      "30%",
      "100%x"
    ],
    "orientation": "horizontal",
    "controls": [
      //ボタン
      {
        "form_button@common_buttons.light_text_button": {
          //ボタン画像指定
          "$button_image": "server_form.button_image_map",
          //デケェ文字
          "$button_font_size": "large",
          //真っ白タイトル
          "$default_text_color": [
            1.0,
            1.0,
            1.0
          ],
          //タイトルオフセット
          "$new_ui_label_offset": [
            0,
            -10
          ],
          //タイトル位置
          "$anchor": "bottom_middle",
          "$pressed_button_name": "button.form_button_click",
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "size": [
            "fill",
            "100%x"
          ],
          "$button_text": "#form_button_text",
          "$button_text_binding_type": "collection",
          "$button_text_grid_collection_name": "form_buttons",
          "$button_text_max_size": [
            "100%",
            20
          ],
          "bindings": [
            {
              "binding_type": "collection_details",
              "binding_collection_name": "form_buttons"
            }
          ]
        }
      }
    ]
  },
  //ボタンの画像
  "button_image_map": {
    "type": "image",
    "layer": 1,
    "$button_alpha|default": "$content_alpha",
    "alpha": "$button_alpha",
    "offset": [
      -2,
      0
    ],
    "bindings": [
      {
        "binding_name": "#form_button_texture",
        "binding_name_override": "#texture",
        "binding_type": "collection",
        "binding_collection_name": "form_buttons"
      },
      {
        "binding_name": "#form_button_texture_file_system",
        "binding_name_override": "#texture_file_system",
        "binding_type": "collection",
        "binding_collection_name": "form_buttons"
      },
      {
        "binding_type": "view",
        "source_property_name": "(not ((#texture = '') or (#texture = 'loading')))",
        "target_property_name": "#visible"
      }
    ]
  },
  //地図背景
  "server_form_background_map@common.dialog_background_hollow_common": {
    "texture": "textures/server_form/server_form_background_map"
  },
  //タイトル
  "map_title_label": {
    "type": "label",
    "layer": 23,
    "line_padding": 1.0,
    "shadow": true,
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "offset": [
      "10%",
      0
    ],
    "text": "#title_text",
    "font_size": "extra_large"
  },
  //ボディ
  "map_body_label": {
    "type": "label",
    "layer": 23,
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "color": "$main_header_text_color",
    "offset": [
      "10%",
      "12% + 3px"
    ],
    "size": [
      "100%",
      "default"
    ],
    "text": "#form_text"
  },
  //ヘッダー(タイトル+ボディ)
  "map_header": {
    "type": "panel",
    "controls": [
      {
        "map_title_label@server_form.map_title_label": {}
      },
      {
        "map_body_label@server_form.map_body_label": {}
      }
    ],
    "bindings": [
      {
        "binding_type": "view",
        "source_property_name": "(not ((#title_text - '§m§a§p§r') = #title_text))",
        "target_property_name": "#visible"
      }
    ]
  },
  //ContainerMenuフォーム--------------------
  "container_form_store": {
    "type": "panel",
    "controls": [
      {
        "container_form@server_form.container_form": {}
      }
    ],
    "bindings": [
      {
        "binding_type": "view",
        "source_property_name": "(#title_text = 'container')",
        "target_property_name": "#visible"
      }
    ]
  },
  "container_form@common_dialogs.main_panel_no_buttons": {
    "$custom_background": "common.dialog_background_opaque",
    "size": "$custom_size",
    "$custom_size|default": [
      175,
      "100%cm"
    ],
    "$title_panel": "common_dialogs.standard_title_label",
    "$title_size": [
      "100% - 14px",
      10
    ],
    "$text_name": "",
    "$title_text_binding_type": "none",
    "$child_control": "server_form.container_form_scrolling_content",
    "layer": 2,
    "controls": [
      {
        "common_panel@common.common_panel": {
          "$dialog_background": "$custom_background",
          "size": [
            "100%",
            "100%sm"
          ]
        }
      },
      {
        "panel_indent": {
          "type": "panel",
          "size": [
            "100% - 16px",
            "100%c"
          ],
          "offset": [
            0,
            23
          ],
          "anchor_from": "top_middle",
          "anchor_to": "top_middle",
          "controls": [
            {
              "inside_header_panel@$child_control": {}
            }
          ]
        }
      }
    ]
  },
  "container_form_scrolling_content": {
    "type": "stack_panel",
    "offset": [
      0,
      -16
    ],
    "size": [
      "100% - 4px",
      "50%c + 20px"
    ],
    "orientation": "vertical",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "controls": [
      {
        "label_offset_panel": {
          "type": "panel",
          "size": [
            "100%",
            "100%c"
          ],
          "controls": [
            {
              "main_label": {
                "type": "label",
                "layer": 32,
                "offset": [
                  0,
                  3
                ],
                "font_size": "normal",
                "color": "$main_header_text_color",
                "size": [
                  "100%",
                  "default"
                ],
                "anchor_from": "top_left",
                "anchor_to": "top_left",
                "text": "#form_text"
              }
            }
          ]
        }
      },
      {
        "padding": {
          "type": "panel",
          "size": [
            "100%",
            4
          ]
        }
      },
      {
        "wrapping_panel": {
          "type": "panel",
          "size": [
            "100%",
            "100%cm"
          ],
          "controls": [
            {
              "container_form_item_cells@server_form.container_form_dynamic_buttons_panel": {
                "grid_item_template": "server_form.item_cell_dynamic_button",
                "factory": {
                  "name": "buttons",
                  "control_name": "server_form.item_cell_dynamic_button"
                }
              }
            }
          ]
        }
      }
    ]
  },
  "container_form_dynamic_buttons_panel": {
    "type": "grid",
    "size": [
      179,
      "100%c"
    ],
    "offset": [
      2,
      0
    ],
    "grid_fill_direction": "vertical",
    "grid_rescaling_type": "horizontal",
    "anchor_from": "top_middle",
    "anchor_to": "top_middle",
    "collection_name": "form_buttons",
    "bindings": [
      {
        "binding_name": "#form_button_length",
        "binding_name_override": "#maximum_grid_items"
      }
    ]
  },
  "item_cell_dynamic_button": {
    "type": "stack_panel",
    "size": [
      18,
      "100%x"
    ],
    "orientation": "horizontal",
    "controls": [
      {
        "form_button@common_buttons.container_light_text_button": {
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "$ignored_string": "@",
          "$prefix": "^",
          "$digit": 5,
          "$pressed_button_name": "button.form_button_click",
          "$button_state_panel_hover": "new_ui_button_panel_with_hover_text",
          "$button_state_panel": "new_ui_button_panel_test",
          "$default_button_texture": "textures/ui/cell_image",
          "$hover_button_texture": "textures/ui/highlight_slot",
          "$button_image_size": [
            "100%",
            "100%"
          ],
          "size": [
            "fill",
            "100%x"
          ],
          "$button_text": "",
          "$button_text_binding_type": "collection",
          "$button_text_grid_collection_name": "form_buttons",
          "$button_text_max_size": [
            "100%",
            20
          ],
          "bindings": [
            {
              "binding_type": "collection_details",
              "binding_collection_name": "form_buttons"
            }
          ]
        }
      }
    ]
  }
}